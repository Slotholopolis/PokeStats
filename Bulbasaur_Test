import requests
from bs4 import BeautifulSoup as bs, element

import csv

pokemon_url = "https://bulbapedia.bulbagarden.net/wiki/Bulbasaur_(Pok%C3%A9mon)"
source = requests.get(pokemon_url).text
soup = bs(source, "html.parser")

csv_file = open('pokemon.csv', 'w')
csv_writer = csv.writer(csv_file)
csv_writer.writerow(['Pokemon', 'National Dex Number', 'HP', 'Attack', 'Defense', 'Special Attack', 'Special Defense', 'Speed', 'Base Stat Total'])

name = soup.find("h1").text.replace(' (Pok√©mon)', '')
row = [name]

dexNo = soup.find('span', attrs={'style': 'color:#000;'})[6]
for dex in dexNo:
    row.append(dex.text)

#--New Issue, Pokemon with different forms or Megas will loop through all stats. Define Break statement after 7 iterations--
stats = soup.find_all('div', attrs={'style': 'float:right'})
for stat in stats:
    row.append(stat.text)
print(row)
    
csv_writer.writerow(row)
 
csv_file.close()
